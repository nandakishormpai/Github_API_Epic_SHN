{% extends 'base.html' %}
{% load static %}


{% block head%}  <title>Groups</title>{% endblock %}



{% block content %}
  <!-- ======= Hero Section ======= -->
  <section id="hero">

    <div class="container">
    </div>

    <svg class="hero-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28 " preserveAspectRatio="none">
      <defs>
        <path id="wave-path" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z">
      </defs>
      <g class="wave1">
        <use xlink:href="#wave-path" x="50" y="3" fill="rgba(255,255,255, .1)">
      </g>
      <g class="wave2">
        <use xlink:href="#wave-path" x="50" y="0" fill="rgba(255,255,255, .2)">
      </g>
      <g class="wave3">
        <use xlink:href="#wave-path" x="50" y="9" fill="#fff">
      </g>
    </svg>

  </section><!-- End Hero -->

  <main id="main">

    <!-- ======= Groups Section ======= -->
    <section id="faq" class="faq section-bg">
      <div class="container">
        <div class="section-title" data-aos="fade-up">
            <h2>Groups</h2>
            {% if messages %}
              {% for message in messages %}
                {{ message }}
              {% endfor %}
            {% endif %}
          
          <div class="faq-list">
            <ul>

              {% for key, value in group_dict.items %}
                <li data-aos="fade-up table_div">
                  <a data-bs-toggle="collapse" class="collapse collapsed" data-bs-target="#faq-list{{key}}" aria-expanded="false">
                    <p>{{key}}</p><i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
                  <div id="faq-list{{key}}" class="collapse" data-bs-parent=".faq-list{{key}}" aria-expanded="false" >
                  <table id="table_id{{key}}" class="display">
                  <caption><a href="{% url 'newmember' %}">Join Now</a> if you are not in the team</caption>
                  <thead>
                  <tr>
                      <th>Name</th>
                      <th>UserName</th>
                      <th>Bio</th>
                      <th>Repos</th>
                      <th>Stars</th>
                      <th>Followers</th>
                    </tr>
                  </thead> 
                  <tbody>
                    {% for user in value %}
                      <tr>
                        <td>{{user.name}}</td>
                        <td>{{user.userId }}</td>
                        <td>{{user.bio }}</td>
                        <td>{{user.repoCount}}</td>
                        <td>{{user.starCount }}</td>
                        <td>{{user.followerCount }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
                <br>
                <br>
                  </div>
                </li>
              {% endfor %}
              
            </ul>
          </div>
            
            </div>
          </div>
      </div>
      <div class="text-center text-lg-start bottom-buttons">
        <a href="{% url 'newmember' %}" class="btn-get-started scrollto join_form joinorrefresh">Join Now!</a>
        <a href="{% url 'creategroup' %}" class="btn-get-started scrollto join_form joinorrefresh">Create Group!</a>
        <form action="{% url 'groups' %}" method="POST">
          {% csrf_token %}
          <input type="submit" class="btn-get-started scrollto join_form joinorrefresh" value="Refresh" name="refreshbtn">
        </form>
        
      </div>
    </section><!-- End About Section--> 

      

    <script>    
    {% for key, value in group_dict.items %}
    $(document).ready( function () {
      $('#table_id{{key}}').DataTable({

      dom: 'B<"clear">lfrtip',
      buttons: {
          name: 'primary',
          buttons: [ 'copy', 'csv', 'excel', 'pdf' ]

          }}
      );
  } );
  {% endfor %}
</script>


{% endblock %}